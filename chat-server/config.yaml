server:
  host: localhost
  port: 8888

mysql:
  host: 127.0.0.1
  port: 3306
  user: root
  password: root
  dbname: chat
  charset: utf8mb4
  max_lifetime: 300      # 连接的最大生命周期（秒），超过此时间连接会被关闭并重新创建
  max_open_conns: 20    # 最大打开连接数（包括空闲和正在使用的）
  max_idle_conns: 10     # 最大空闲连接数
  conn_timeout: 5

redis:
  address: "localhost:6379"
  username: "root"
  password: "root"
  db: 0
  pool_size: 100         # 连接池大小（最大连接数）
  min_idle_conns: 10     # 最小空闲连接数
  pool_timeout: 5        # 获取连接的超时时间（秒）
  idle_timeout: 300

mongo:
  uri: mongodb+srv://root:root@chat-mongo.rimufll.mongodb.net/?retryWrites=true&w=majority&appName=chat-mongo
  dbname: chat
  min_pool_size: 5       # 最小连接数
  max_pool_size: 100     # 最大连接数
  connect_timeout: 10    # 连接超时时间（秒）
  max_conn_idle_time: 300 # 连接最大空闲时间（秒）

elasticsearch:
  address: https://4ff4cca5c85e41169f6e3fc0ce869900.ap-east-1.aws.elastic-cloud.com:443
  api_key: SndVaUY1Y0JNMVVNVmZZQ1JFd0s6WlYtZkNfS3dMc2hFbVBMZUJmUnhMdw==
  insecure_skip_verify: true


db_schema:
  mysql:
    script_file: "schemas/mysql/chat.sql"

  mongodb:
    collections:
      - name: messages
        index_file: "schemas/mongo/chat_messages_indexes.json"
        validator_command_file: "schemas/mongo/chat_messages_validator.json"

  elasticsearch:
    indices:
      - name: messages
        request_file: "schemas/es/messages_index_create_request.json"


mongo_es_sync:
  - mongo_collection: messages
    es_index: messages

logger:
  level: info
  output: stdout
  format: json
  source_path: true


# JWT配置
jwt:
  secret: "chat"  # JWT密钥，生产环境请使用强密钥
  access_time: 30 # 30分钟
  refresh_time: 30 # 30天
  user_tokens_time: 30 # 30天
  issuer: "chat-server"           # 签发人



